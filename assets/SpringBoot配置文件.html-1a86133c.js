import{_ as p,W as i,X as l,Y as n,Z as a,$ as e,a1 as t,C as o}from"./framework-a045178c.js";const r="/assets/2023-05-16-10-47-07-image-fa0b6057.png",c={},u=t('<h2 id="配置文件的种类" tabindex="-1"><a class="header-anchor" href="#配置文件的种类" aria-hidden="true">#</a> 配置文件的种类</h2><p>SpringBoot支持两种格式的配置文件分别是<code>properties</code>和<code>yml</code>。主流使用yml格式，即<code>application.yml</code></p><p>另外，当application.properties和application.yml同时存在时，application.properties的优先级更高</p><h2 id="配置文件优先级" tabindex="-1"><a class="header-anchor" href="#配置文件优先级" aria-hidden="true">#</a> 配置文件优先级</h2><h3 id="官方文档" tabindex="-1"><a class="header-anchor" href="#官方文档" aria-hidden="true">#</a> 官方文档</h3><p>Config data files are considered in the following order:</p>',6),d={href:"https://docs.spring.io/spring-boot/docs/current/reference/html/features.html#features.external-config.files",target:"_blank",rel:"noopener noreferrer"},k=n("code",null,"application.properties",-1),v={href:"https://docs.spring.io/spring-boot/docs/current/reference/html/features.html#features.external-config.files.profile-specific",target:"_blank",rel:"noopener noreferrer"},m=n("code",null,"application-{profile}.properties",-1),h={href:"https://docs.spring.io/spring-boot/docs/current/reference/html/features.html#features.external-config.files",target:"_blank",rel:"noopener noreferrer"},b=n("code",null,"application.properties",-1),g={href:"https://docs.spring.io/spring-boot/docs/current/reference/html/features.html#features.external-config.files.profile-specific",target:"_blank",rel:"noopener noreferrer"},f=n("code",null,"application-{profile}.properties",-1),y={href:"https://spring.io/projects/spring-boot",target:"_blank",rel:"noopener noreferrer"},_={href:"https://docs.spring.io/spring-boot/docs/current/reference/html/",target:"_blank",rel:"noopener noreferrer"},x={href:"https://docs.spring.io/spring-boot/docs/current/reference/html/application-properties.html#appendix.application-properties",target:"_blank",rel:"noopener noreferrer"},B=t('<h2 id="补充" tabindex="-1"><a class="header-anchor" href="#补充" aria-hidden="true">#</a> 补充</h2><p>官方文档只写出了在jar包内的优先级比在jar包外的优先级搞，此外还有以下四种情况，其优先级依次降低：</p><p>1级： file ：config/application.yml（【最高】）（file目录就是jar包所在目录）</p><p>2级： file ：application.yml</p><p>3级：classpath：config/application.yml</p><p>4级：classpath：application.yml（【最低】）</p><p>作用：</p><p> 1级与2级留做系统打包后设置通用属性，1级常用于运维经理进行线上整体项目部署方案调控</p><p> 3级与4级用于系统开发阶段设置通用属性，3级常用于项目经理进行整体项目属性调控</p><figure><img src="'+r+`" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h2 id="多环境配置文件" tabindex="-1"><a class="header-anchor" href="#多环境配置文件" aria-hidden="true">#</a> 多环境配置文件</h2><h3 id="单配置文件的多环境配置" tabindex="-1"><a class="header-anchor" href="#单配置文件的多环境配置" aria-hidden="true">#</a> 单配置文件的多环境配置</h3><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
 <span class="token key atrule">profiles</span><span class="token punctuation">:</span>
<span class="token comment"># 设置使用哪个环境</span>
  <span class="token key atrule">active</span><span class="token punctuation">:</span> pro
<span class="token comment"># 不同环境之间用“---”隔开</span>
<span class="token punctuation">---</span> 
<span class="token key atrule">spring</span><span class="token punctuation">:</span>
<span class="token comment"># 给当前环境命名</span>
 <span class="token key atrule">profiles</span><span class="token punctuation">:</span> pro <span class="token comment">#过时格式</span>
<span class="token comment"># 当前推荐格式</span>
<span class="token key atrule">spring</span><span class="token punctuation">:</span>
 <span class="token key atrule">config</span><span class="token punctuation">:</span>
  <span class="token key atrule">activate</span><span class="token punctuation">:</span>
   <span class="token key atrule">on-profile</span><span class="token punctuation">:</span> pro
<span class="token key atrule">server</span><span class="token punctuation">:</span>
 <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">80</span>
<span class="token punctuation">---</span>
<span class="token key atrule">spring</span><span class="token punctuation">:</span>
<span class="token key atrule">profiles</span><span class="token punctuation">:</span> dev
<span class="token key atrule">server</span><span class="token punctuation">:</span>
<span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">81</span>
<span class="token punctuation">---</span>
<span class="token key atrule">spring</span><span class="token punctuation">:</span>
<span class="token key atrule">profiles</span><span class="token punctuation">:</span> test
<span class="token key atrule">server</span><span class="token punctuation">:</span>
<span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">82</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="多配置文件的多环境配置" tabindex="-1"><a class="header-anchor" href="#多配置文件的多环境配置" aria-hidden="true">#</a> 多配置文件的多环境配置</h3><p>1.主启动配置文件application.yml</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
 <span class="token key atrule">profiles</span><span class="token punctuation">:</span>
<span class="token comment"># 主文件仅需要指定使用哪个配置文件</span>
  <span class="token key atrule">active</span><span class="token punctuation">:</span> dev
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>环境分类配置文件application-pro.yml</li></ol><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>
 <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">80</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>环境分类配置文件application-dev.yml</li></ol><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>
 <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">81</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ol start="4"><li>环境分类配置文件application-test.yml</li></ol><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>
 <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">82</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>主配置文件中设置公共配置（全局）</p><p>环境分类配置文件中常用于设置冲突属性（局部）</p><p>另外如果使用properties，则只可以使用多文件配置多环境。</p><h2 id="环境分组管理" tabindex="-1"><a class="header-anchor" href="#环境分组管理" aria-hidden="true">#</a> 环境分组管理</h2><p>根据功能对配置文件中的信息进行拆分，并制作成独立的配置文件，命名规则如下</p><p> application-devDB.yml</p><p> application-devRedis.yml</p><p> application-devMVC.yml</p><p>使用include属性在激活指定环境的情况下，同时对多个环境进行加载使其生效，多个环境间使用逗号分隔</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
 <span class="token key atrule">profiles</span><span class="token punctuation">:</span>
 <span class="token key atrule">active</span><span class="token punctuation">:</span> dev
 <span class="token key atrule">include</span><span class="token punctuation">:</span> devDB<span class="token punctuation">,</span>devRedis<span class="token punctuation">,</span>devMVC
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>当主环境dev与其他环境有相同属性时，主环境属性生效；其他环境中有相同属性时，最后加载的环境属性生效</p></blockquote><p>或者使用group属性（SpringBoot2.4及以后版本）</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
 <span class="token key atrule">profiles</span><span class="token punctuation">:</span>
 <span class="token key atrule">active</span><span class="token punctuation">:</span> dev
 <span class="token key atrule">group</span><span class="token punctuation">:</span>
  <span class="token key atrule">&quot;dev&quot;</span><span class="token punctuation">:</span> devDB<span class="token punctuation">,</span>devRedis<span class="token punctuation">,</span>devMVC
  <span class="token key atrule">&quot;pro&quot;</span><span class="token punctuation">:</span> proDB<span class="token punctuation">,</span>proRedis<span class="token punctuation">,</span>proMVC
  <span class="token key atrule">&quot;test&quot;</span><span class="token punctuation">:</span> testDB<span class="token punctuation">,</span>testRedis<span class="token punctuation">,</span>testMVC
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,35);function q(C,M){const s=o("ExternalLinkIcon");return i(),l("div",null,[u,n("ol",null,[n("li",null,[n("p",null,[n("a",d,[a("Application properties"),e(s)]),a(" packaged inside your jar ( and YAML variants)."),k])]),n("li",null,[n("p",null,[n("a",v,[a("Profile-specific application properties"),e(s)]),a(" packaged inside your jar ( and YAML variants)."),m])]),n("li",null,[n("p",null,[n("a",h,[a("Application properties"),e(s)]),a(" outside of your packaged jar ( and YAML variants)."),b])]),n("li",null,[n("p",null,[n("a",g,[a("Profile-specific application properties"),e(s)]),a(" outside of your packaged jar ( and YAML variants)."),f])])]),n("blockquote",null,[n("p",null,[a("1.打开SpringBoot官网"),n("a",y,[a("Spring Boot"),e(s)])]),n("p",null,[a("2.选择一个版本的文档"),n("a",_,[a("Spring Boot Reference Documentation"),e(s)])]),n("p",null,[a("3.选择其中的Application Propertise链接"),n("a",x,[a("Common Application Properties (spring.io)"),e(s)])])]),B])}const j=p(c,[["render",q],["__file","SpringBoot配置文件.html.vue"]]);export{j as default};
